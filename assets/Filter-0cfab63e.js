import{R as _e,f as $t,h as Ht,j as u,r as re,i as Wt,u as ft,k as zt,l as Kt,m as D,n as Gt,e as Yt,o as Jt}from"./index-9d4f1248.js";import{P as g}from"./index-77f02436.js";function yt(e=_e){const r=e===_e?$t:Ht(e);return function(){const{store:s}=r();return s}}const Qt=yt();function Xt(e=_e){const r=e===_e?Qt:yt(e);return function(){return r().dispatch}}const ht=Xt(),ue=({label:e,iconURL:r,ariaLabel:t,onClick:s,type:n,id:l})=>u.jsxs("button",{"data-id":l,type:n,onClick:s,children:[e,r&&u.jsx("svg",{width:"18",height:"18","aria-label":t})]});ue.propTypes={label:g.string,iconURL:g.string,ariaLabel:g.string,className:g.string,svgClass:g.string,onClick:g.func,type:g.string,id:g.any};const gt=e=>{const r=e.split(", "),t=r[1],s=r[r.length-1];return{city:t,country:s}},Zt=e=>{const{type:r,mileage:t,functionalities:s}=e;return{type:r,mileage:t,functionalities:s}},es=(e,r)=>{const{city:t,country:s}=gt(e),{rentalCompany:n}=r;return[t,s,n]},Ne=(e,r,t)=>e.map((s,n)=>u.jsxs("li",{className:t?`text-description ${t}`:"text-description ",children:[s,n<e.length-1&&r]},n)),ts=e=>{if(!e||e.length===0)return"";let r=e[0];for(let s=1;s<e.length;s++){const n=e[s];n.split(" ").length<r.split(" ").length&&(r=n)}const t=r.split(" ");return t.length>3?t.slice(0,3).join(" "):r},ss=(e,r)=>e==="functionalities"?ts(r):e==="type"?r.split(",")[0].trim():r,Us=(e,r)=>e==null?void 0:e.slice(0,r),rs=({target:e,currentTarget:r,code:t},s)=>{(e===r||t==="Escape")&&s()},is=(e,r)=>{const{city:t,country:s}=gt(e),{year:n,type:l,id:c}=r;return[t,s,`Id: ${c}`,`Year: ${n}`,`Type: ${l}`]},ns=e=>{const{fuelConsumption:r,engineSize:t}=e;return[`Fuel Consumption: ${r}`,`Engine Size: ${t}`]},as=e=>{const r=e.split(`
`),t=r[0].split(" ").slice(-1).join("");return r[0]=r[0].replace(t,""),r.splice(1,0,t),r},ls=e=>e.toLocaleString("en-EN"),mt=e=>e.split("").slice(1).join(""),os=e=>{if(!Array.isArray(e)||!e.length)return[];let r=0;const t=[];if(e.forEach(n=>{const l=+mt(n.rentalPrice);l>r&&(r=l)}),r===0)return[];let s=10;for(;s<=r;)t.push(s),s+=10;return t},Ps=(e,r)=>r?e.filter(t=>{const s=parseInt(t.rentalPrice.substring(1)),n=parseFloat(t.mileage),l=!r.brand||t.make.toLowerCase()===r.brand.toLowerCase(),c=!r.price||s<=r.price,v=!r.from||n>=r.from,m=!r.to||n<=r.to,j=!r.rentalCompany||t.rentalCompany.toLowerCase()===r.rentalCompany.toLowerCase();return l&&c&&v&&m&&j}):e,us="/RentedCars/assets/youngman-08677e87.jpg",cs=(e=!1)=>{const[r,t]=re.useState(e);return{isOpen:r,open:()=>t(!0),close:()=>t(!1),toggle:()=>t(c=>!c)}},ds=document.getElementById("modal"),pt=({onClose:e,children:r,isOpen:t})=>{re.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[t]);const s=re.useCallback(n=>{document.body.style.overflow="visible",rs(n,e)},[e]);return re.useEffect(()=>(document.body.addEventListener("keydown",s),()=>document.body.removeEventListener("keydown",s)),[s]),Wt.createPortal(u.jsx("div",{className:"backdrop",onClick:s,children:u.jsxs("div",{className:"modal max-w-full dark:bg-slate-700",children:[u.jsx(ue,{onClick:e,className:"close",type:"button",iconURL:"#icon-close",ariaLabel:"close icon"}),r]})}),ds)};pt.propTypes={children:g.node.isRequired,onClose:g.func.isRequired,isOpen:g.bool};const Pe=({src:e,alt:r,className:t,blockClass:s,width:n,height:l})=>u.jsx("div",{className:s?` ${s}`:"",children:u.jsx("img",{src:e?`${e}`:"",alt:r,className:t?`block ${t}`:"block",width:n,height:l,loading:"lazy"})});Pe.propTypes={src:g.string.isRequired,alt:g.string.isRequired,className:g.string,blockClass:g.string,width:g.string.isRequired,height:g.string};const le=({conditionText:e,conditionValue:r})=>u.jsxs("li",{children:[u.jsx("p",{children:e}),r&&u.jsx("span",{children:r})]});le.propTypes={conditionText:g.string.isRequired,conditionValue:g.string};const xt=({rentConditions:e,mile:r,price:t,title:s})=>u.jsxs("div",{children:[u.jsxs("p",{children:[s,":"]}),u.jsxs("ul",{children:[u.jsx(le,{conditionText:e[0],conditionValue:e[1]}),u.jsx(le,{conditionText:e[2]}),u.jsx(le,{conditionText:e[3]}),u.jsx(le,{conditionText:"Mileage: ",conditionValue:r}),u.jsx(le,{conditionText:"Price: ",conditionValue:`${t}$`})]})]});xt.propTypes={rentConditions:g.array.isRequired,mile:g.string.isRequired,price:g.string.isRequired,title:g.string.isRequired};const Fe=()=>u.jsx("span",{children:"|"}),Ue=({items:e,separator:r})=>u.jsx("ul",{children:e.map((t,s)=>u.jsxs("li",{children:[t,s<e.length-1&&r]},s))});Ue.propTypes={items:g.array.isRequired,separator:g.any};const vt=({accessories:e,functionalities:r,title:t})=>u.jsxs("div",{children:[u.jsxs("p",{children:[t,":"]}),u.jsx(Ue,{items:e,separator:u.jsx(Fe,{})}),u.jsx(Ue,{items:r,separator:u.jsx(Fe,{})})]});vt.propTypes={accessories:g.array.isRequired,functionalities:g.array.isRequired,title:g.string.isRequired};const bt=({car:e})=>{const{year:r,make:t,model:s,img:n,rentalPrice:l,address:c,description:v,accessories:m,functionalities:j,rentalConditions:V,mileage:x}=e,b=ns(e),O=is(c,e),R=as(V),M=ls(x),P=mt(l);return u.jsxs(u.Fragment,{children:[u.jsx(Pe,{width:"461",height:"248",src:n,alt:`${t} ${s}`,className:"modal-car",blockClass:"w-[461px] h-[248px]",loading:"lazy"}),t," ",u.jsx("span",{children:s}),", ",r,u.jsxs("div",{children:[u.jsx("ul",{children:Ne(O)}),u.jsx("ul",{className:"modal-description flex items-center justify-start",children:Ne(b)})]}),u.jsx("div",{className:"modal-accent-descr dark:text-white",children:v}),u.jsx(vt,{title:"Accessories and functionalities",accessories:m,functionalities:j}),u.jsx(xt,{title:"Rental Conditions",rentConditions:R,mile:M,price:P}),u.jsx("a",{href:"tel:+380730000000",children:"Rental car"})]})};bt.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired,accessories:g.array.isRequired,rentalConditions:g.string.isRequired}).isRequired};const Bs=e=>e.cars.items,fs=e=>e.cars.favorites,ys=e=>e.cars.filter,_t=({locationData:e,carData:r})=>u.jsxs(u.Fragment,{children:[u.jsx("ul",{children:Ne(e,u.jsx(Fe,{}))}),u.jsx("ul",{children:Object.entries(r).map(([t,s],n,l)=>u.jsxs("li",{children:[ss(t,s),n<l.length-1&&u.jsx(Fe,{})]},n))})]});_t.propTypes={carData:g.object.isRequired,locationData:g.array.isRequired};const hs=({car:e})=>{const{isOpen:r,open:t,close:s}=cs(!1),n=ft(fs),l=ht(),{id:c,year:v,make:m,model:j,img:V,rentalPrice:x,address:b}=e,O=Zt(e),R=es(b,e),M=n==null?void 0:n.some(ce=>ce.id===c),P=()=>l(M?zt(e):Kt(e));return u.jsx(u.Fragment,{children:u.jsxs("li",{className:"card flex-auto",children:[u.jsx(ue,{type:"button",iconURL:"#icon-heart",ariaLabel:"heart icon",onClick:P,className:`heart ${M?"favorite":""}`}),u.jsx(Pe,{className:"card-image",src:V||us,alt:`${m} ${j}`,width:"274",height:"426",loading:"lazy"}),u.jsxs("span",{children:[m,u.jsx("span",{children:j}),", ",v]}),u.jsx("span",{children:x}),u.jsx(_t,{locationData:R,carData:O}),u.jsx(ue,{label:"Learn more",className:"card-big-button",onClick:t}),r&&u.jsx(pt,{isOpen:r,onClose:s,children:u.jsx(bt,{car:e})})]})})};hs.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired}).isRequired,fav:g.bool};const gs=(e,r)=>{const[t,s]=re.useState([]);return re.useEffect(()=>{if(!r)return;const n=[...new Set(e.map(l=>l[r]))];s(n)},[e,r]),t};var he=e=>e.type==="checkbox",oe=e=>e instanceof Date,N=e=>e==null;const Ft=e=>typeof e=="object";var E=e=>!N(e)&&!Array.isArray(e)&&Ft(e)&&!oe(e),Vt=e=>E(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,ms=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,jt=(e,r)=>e.has(ms(r)),ps=e=>{const r=e.constructor&&e.constructor.prototype;return E(r)&&r.hasOwnProperty("isPrototypeOf")},Be=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function H(e){let r;const t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Be&&(e instanceof Blob||e instanceof FileList))&&(t||E(e)))if(r=t?[]:{},!t&&!ps(e))r=e;else for(const s in e)e.hasOwnProperty(s)&&(r[s]=H(e[s]));else return e;return r}var ge=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,y=(e,r,t)=>{if(!r||!E(e))return t;const s=ge(r.split(/[,[\].]+?/)).reduce((n,l)=>N(n)?n:n[l],e);return k(s)||s===e?k(e[r])?t:e[r]:s},G=e=>typeof e=="boolean";const Ve={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},xs=D.createContext(null),Ie=()=>D.useContext(xs);var At=(e,r,t,s=!0)=>{const n={defaultValues:r._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const c=l;return r._proxyFormState[c]!==W.all&&(r._proxyFormState[c]=!s||W.all),t&&(t[c]=!0),e[c]}});return n},I=e=>E(e)&&!Object.keys(e).length,Rt=(e,r,t,s)=>{t(e);const{name:n,...l}=e;return I(l)||Object.keys(l).length>=Object.keys(r).length||Object.keys(l).find(c=>r[c]===(!s||W.all))},xe=e=>Array.isArray(e)?e:[e],Ct=(e,r,t)=>!e||!r||e===r||xe(e).some(s=>s&&(t?s===r:s.startsWith(r)||r.startsWith(s)));function $e(e){const r=D.useRef(e);r.current=e,D.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function vs(e){const r=Ie(),{control:t=r.control,disabled:s,name:n,exact:l}=e||{},[c,v]=D.useState(t._formState),m=D.useRef(!0),j=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),V=D.useRef(n);return V.current=n,$e({disabled:s,next:x=>m.current&&Ct(V.current,x.name,l)&&Rt(x,j.current,t._updateFormState)&&v({...t._formState,...x}),subject:t._subjects.state}),D.useEffect(()=>(m.current=!0,j.current.isValid&&t._updateValid(!0),()=>{m.current=!1}),[t]),At(c,t,j.current,!1)}var Y=e=>typeof e=="string",wt=(e,r,t,s,n)=>Y(e)?(s&&r.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(l=>(s&&r.watch.add(l),y(t,l))):(s&&(r.watchAll=!0),t);function bs(e){const r=Ie(),{control:t=r.control,name:s,defaultValue:n,disabled:l,exact:c}=e||{},v=D.useRef(s);v.current=s,$e({disabled:l,subject:t._subjects.values,next:V=>{Ct(v.current,V.name,c)&&j(H(wt(v.current,t._names,V.values||t._formValues,!1,n)))}});const[m,j]=D.useState(t._getWatch(s,n));return D.useEffect(()=>t._removeUnmounted()),m}var He=e=>/^\w*$/.test(e),Dt=e=>ge(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,r,t){let s=-1;const n=He(r)?[r]:Dt(r),l=n.length,c=l-1;for(;++s<l;){const v=n[s];let m=t;if(s!==c){const j=e[v];m=E(j)||Array.isArray(j)?j:isNaN(+n[s+1])?{}:[]}e[v]=m,e=e[v]}return e}function _s(e){const r=Ie(),{name:t,disabled:s,control:n=r.control,shouldUnregister:l}=e,c=jt(n._names.array,t),v=bs({control:n,name:t,defaultValue:y(n._formValues,t,y(n._defaultValues,t,e.defaultValue)),exact:!0}),m=vs({control:n,name:t}),j=D.useRef(n.register(t,{...e.rules,value:v}));return j.current=n.register(t,e.rules),D.useEffect(()=>{const V=n._options.shouldUnregister||l,x=(b,O)=>{const R=y(n._fields,b);R&&(R._f.mount=O)};if(x(t,!0),V){const b=H(y(n._options.defaultValues,t));w(n._defaultValues,t,b),k(y(n._formValues,t))&&w(n._formValues,t,b)}return()=>{(c?V&&!n._state.action:V)?n.unregister(t):x(t,!1)}},[t,n,c,l]),D.useEffect(()=>{y(n._fields,t)&&n._updateDisabledField({disabled:s,fields:n._fields,name:t,value:y(n._fields,t)._f.value})},[s,t,n]),{field:{name:t,value:v,...G(s)||G(m.disabled)?{disabled:m.disabled||s}:{},onChange:D.useCallback(V=>j.current.onChange({target:{value:Vt(V),name:t},type:Ve.CHANGE}),[t]),onBlur:D.useCallback(()=>j.current.onBlur({target:{value:y(n._formValues,t),name:t},type:Ve.BLUR}),[t,n]),ref:V=>{const x=y(n._fields,t);x&&V&&(x._f.ref={focus:()=>V.focus(),select:()=>V.select(),setCustomValidity:b=>V.setCustomValidity(b),reportValidity:()=>V.reportValidity()})}},formState:m,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(m.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(m.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(m.touchedFields,t)},error:{enumerable:!0,get:()=>y(m.errors,t)}})}}const rt=e=>e.render(_s(e));var Fs=(e,r,t,s,n)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:n||!0}}:{},it=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched}),nt=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const ve=(e,r,t,s)=>{for(const n of t||Object.keys(e)){const l=y(e,n);if(l){const{_f:c,...v}=l;if(c){if(c.refs&&c.refs[0]&&r(c.refs[0],n)&&!s)break;if(c.ref&&r(c.ref,c.name)&&!s)break}else E(v)&&ve(v,r)}}};var Vs=(e,r,t)=>{const s=ge(y(e,t));return w(s,"root",r[t]),w(e,t,s),e},We=e=>e.type==="file",Z=e=>typeof e=="function",je=e=>{if(!Be)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},be=e=>Y(e),ze=e=>e.type==="radio",Ae=e=>e instanceof RegExp;const at={value:!1,isValid:!1},lt={value:!0,isValid:!0};var kt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?lt:{value:e[0].value,isValid:!0}:lt:at}return at};const ot={isValid:!1,value:null};var St=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,ot):ot;function ut(e,r,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||G(e)&&!e)return{type:t,message:be(e)?e:"",ref:r}}var ae=e=>E(e)&&!Ae(e)?e:{value:e,message:""},ct=async(e,r,t,s,n)=>{const{ref:l,refs:c,required:v,maxLength:m,minLength:j,min:V,max:x,pattern:b,validate:O,name:R,valueAsNumber:M,mount:P,disabled:ce}=e._f,_=y(r,R);if(!P||ce)return{};const $=c?c[0]:l,J=A=>{s&&$.reportValidity&&($.setCustomValidity(G(A)?"":A||""),$.reportValidity())},T={},de=ze(l),ie=he(l),we=de||ie,z=(M||We(l))&&k(l.value)&&k(_)||je(l)&&l.value===""||_===""||Array.isArray(_)&&!_.length,ee=Fs.bind(null,R,t,T),Q=(A,F,S,U=X.maxLength,B=X.minLength)=>{const K=A?F:S;T[R]={type:A?U:B,message:K,ref:l,...ee(A?U:B,K)}};if(n?!Array.isArray(_)||!_.length:v&&(!we&&(z||N(_))||G(_)&&!_||ie&&!kt(c).isValid||de&&!St(c).isValid)){const{value:A,message:F}=be(v)?{value:!!v,message:v}:ae(v);if(A&&(T[R]={type:X.required,message:F,ref:$,...ee(X.required,F)},!t))return J(F),T}if(!z&&(!N(V)||!N(x))){let A,F;const S=ae(x),U=ae(V);if(!N(_)&&!isNaN(_)){const B=l.valueAsNumber||_&&+_;N(S.value)||(A=B>S.value),N(U.value)||(F=B<U.value)}else{const B=l.valueAsDate||new Date(_),K=me=>new Date(new Date().toDateString()+" "+me),te=l.type=="time",fe=l.type=="week";Y(S.value)&&_&&(A=te?K(_)>K(S.value):fe?_>S.value:B>new Date(S.value)),Y(U.value)&&_&&(F=te?K(_)<K(U.value):fe?_<U.value:B<new Date(U.value))}if((A||F)&&(Q(!!A,S.message,U.message,X.max,X.min),!t))return J(T[R].message),T}if((m||j)&&!z&&(Y(_)||n&&Array.isArray(_))){const A=ae(m),F=ae(j),S=!N(A.value)&&_.length>+A.value,U=!N(F.value)&&_.length<+F.value;if((S||U)&&(Q(S,A.message,F.message),!t))return J(T[R].message),T}if(b&&!z&&Y(_)){const{value:A,message:F}=ae(b);if(Ae(A)&&!_.match(A)&&(T[R]={type:X.pattern,message:F,ref:l,...ee(X.pattern,F)},!t))return J(F),T}if(O){if(Z(O)){const A=await O(_,r),F=ut(A,$);if(F&&(T[R]={...F,...ee(X.validate,F.message)},!t))return J(F.message),T}else if(E(O)){let A={};for(const F in O){if(!I(A)&&!t)break;const S=ut(await O[F](_,r),$,F);S&&(A={...S,...ee(F,S.message)},J(S.message),t&&(T[R]=A))}if(!I(A)&&(T[R]={ref:$,...A},!t))return T}}return J(!0),T};function js(e,r){const t=r.slice(0,-1).length;let s=0;for(;s<t;)e=k(e)?s++:e[r[s++]];return e}function As(e){for(const r in e)if(e.hasOwnProperty(r)&&!k(e[r]))return!1;return!0}function L(e,r){const t=Array.isArray(r)?r:He(r)?[r]:Dt(r),s=t.length===1?e:js(e,t),n=t.length-1,l=t[n];return s&&delete s[l],n!==0&&(E(s)&&I(s)||Array.isArray(s)&&As(s))&&L(e,t.slice(0,-1)),e}function Te(){let e=[];return{get observers(){return e},next:n=>{for(const l of e)l.next&&l.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(l=>l!==n)}}),unsubscribe:()=>{e=[]}}}var Re=e=>N(e)||!Ft(e);function se(e,r){if(Re(e)||Re(r))return e===r;if(oe(e)&&oe(r))return e.getTime()===r.getTime();const t=Object.keys(e),s=Object.keys(r);if(t.length!==s.length)return!1;for(const n of t){const l=e[n];if(!s.includes(n))return!1;if(n!=="ref"){const c=r[n];if(oe(l)&&oe(c)||E(l)&&E(c)||Array.isArray(l)&&Array.isArray(c)?!se(l,c):l!==c)return!1}}return!0}var qt=e=>e.type==="select-multiple",Rs=e=>ze(e)||he(e),Le=e=>je(e)&&e.isConnected,Et=e=>{for(const r in e)if(Z(e[r]))return!0;return!1};function Ce(e,r={}){const t=Array.isArray(e);if(E(e)||t)for(const s in e)Array.isArray(e[s])||E(e[s])&&!Et(e[s])?(r[s]=Array.isArray(e[s])?[]:{},Ce(e[s],r[s])):N(e[s])||(r[s]=!0);return r}function Tt(e,r,t){const s=Array.isArray(e);if(E(e)||s)for(const n in e)Array.isArray(e[n])||E(e[n])&&!Et(e[n])?k(r)||Re(t[n])?t[n]=Array.isArray(e[n])?Ce(e[n],[]):{...Ce(e[n])}:Tt(e[n],N(r)?{}:r[n],t[n]):t[n]=!se(e[n],r[n]);return t}var Oe=(e,r)=>Tt(e,r,Ce(r)),Lt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:s})=>k(e)?e:r?e===""?NaN:e&&+e:t&&Y(e)?new Date(e):s?s(e):e;function Me(e){const r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return We(r)?r.files:ze(r)?St(e.refs).value:qt(r)?[...r.selectedOptions].map(({value:t})=>t):he(r)?kt(e.refs).value:Lt(k(r.value)?e.ref.value:r.value,e)}var Cs=(e,r,t,s)=>{const n={};for(const l of e){const c=y(r,l);c&&w(n,l,c._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:s}},ye=e=>k(e)?e:Ae(e)?e.source:E(e)?Ae(e.value)?e.value.source:e.value:e,ws=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function dt(e,r,t){const s=y(e,t);if(s||He(t))return{error:s,name:t};const n=t.split(".");for(;n.length;){const l=n.join("."),c=y(r,l),v=y(e,l);if(c&&!Array.isArray(c)&&t!==l)return{name:t};if(v&&v.type)return{name:l,error:v};n.pop()}return{name:t}}var Ds=(e,r,t,s,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(r||e):(t?s.isOnBlur:n.isOnBlur)?!e:(t?s.isOnChange:n.isOnChange)?e:!0,ks=(e,r)=>!ge(y(e,r)).length&&L(e,r);const Ss={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function qs(e={},r){let t={...Ss,...e},s={submitCount:0,isDirty:!1,isLoading:Z(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{},disabled:!1},n={},l=E(t.defaultValues)||E(t.values)?H(t.defaultValues||t.values)||{}:{},c=t.shouldUnregister?{}:H(l),v={action:!1,mount:!1,watch:!1},m={mount:new Set,unMount:new Set,array:new Set,watch:new Set},j,V=0;const x={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:Te(),array:Te(),state:Te()},O=e.resetOptions&&e.resetOptions.keepDirtyValues,R=it(t.mode),M=it(t.reValidateMode),P=t.criteriaMode===W.all,ce=i=>a=>{clearTimeout(V),V=setTimeout(i,a)},_=async i=>{if(x.isValid||i){const a=t.resolver?I((await z()).errors):await Q(n,!0);a!==s.isValid&&b.state.next({isValid:a})}},$=i=>x.isValidating&&b.state.next({isValidating:i}),J=(i,a=[],o,h,f=!0,d=!0)=>{if(h&&o){if(v.action=!0,d&&Array.isArray(y(n,i))){const p=o(y(n,i),h.argA,h.argB);f&&w(n,i,p)}if(d&&Array.isArray(y(s.errors,i))){const p=o(y(s.errors,i),h.argA,h.argB);f&&w(s.errors,i,p),ks(s.errors,i)}if(x.touchedFields&&d&&Array.isArray(y(s.touchedFields,i))){const p=o(y(s.touchedFields,i),h.argA,h.argB);f&&w(s.touchedFields,i,p)}x.dirtyFields&&(s.dirtyFields=Oe(l,c)),b.state.next({name:i,isDirty:F(i,a),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else w(c,i,a)},T=(i,a)=>{w(s.errors,i,a),b.state.next({errors:s.errors})},de=(i,a,o,h)=>{const f=y(n,i);if(f){const d=y(c,i,k(o)?y(l,i):o);k(d)||h&&h.defaultChecked||a?w(c,i,a?d:Me(f._f)):B(i,d),v.mount&&_()}},ie=(i,a,o,h,f)=>{let d=!1,p=!1;const C={name:i};if(!o||h){x.isDirty&&(p=s.isDirty,s.isDirty=C.isDirty=F(),d=p!==C.isDirty);const q=se(y(l,i),a);p=y(s.dirtyFields,i),q?L(s.dirtyFields,i):w(s.dirtyFields,i,!0),C.dirtyFields=s.dirtyFields,d=d||x.dirtyFields&&p!==!q}if(o){const q=y(s.touchedFields,i);q||(w(s.touchedFields,i,o),C.touchedFields=s.touchedFields,d=d||x.touchedFields&&q!==o)}return d&&f&&b.state.next(C),d?C:{}},we=(i,a,o,h)=>{const f=y(s.errors,i),d=x.isValid&&G(a)&&s.isValid!==a;if(e.delayError&&o?(j=ce(()=>T(i,o)),j(e.delayError)):(clearTimeout(V),j=null,o?w(s.errors,i,o):L(s.errors,i)),(o?!se(f,o):f)||!I(h)||d){const p={...h,...d&&G(a)?{isValid:a}:{},errors:s.errors,name:i};s={...s,...p},b.state.next(p)}$(!1)},z=async i=>t.resolver(c,t.context,Cs(i||m.mount,n,t.criteriaMode,t.shouldUseNativeValidation)),ee=async i=>{const{errors:a}=await z(i);if(i)for(const o of i){const h=y(a,o);h?w(s.errors,o,h):L(s.errors,o)}else s.errors=a;return a},Q=async(i,a,o={valid:!0})=>{for(const h in i){const f=i[h];if(f){const{_f:d,...p}=f;if(d){const C=m.array.has(d.name),q=await ct(f,c,P,t.shouldUseNativeValidation&&!a,C);if(q[d.name]&&(o.valid=!1,a))break;!a&&(y(q,d.name)?C?Vs(s.errors,q,d.name):w(s.errors,d.name,q[d.name]):L(s.errors,d.name))}p&&await Q(p,a,o)}}return o.valid},A=()=>{for(const i of m.unMount){const a=y(n,i);a&&(a._f.refs?a._f.refs.every(o=>!Le(o)):!Le(a._f.ref))&&ke(i)}m.unMount=new Set},F=(i,a)=>(i&&a&&w(c,i,a),!se(Ke(),l)),S=(i,a,o)=>wt(i,m,{...v.mount?c:k(a)?l:Y(i)?{[i]:a}:a},o,a),U=i=>ge(y(v.mount?c:l,i,e.shouldUnregister?y(l,i,[]):[])),B=(i,a,o={})=>{const h=y(n,i);let f=a;if(h){const d=h._f;d&&(!d.disabled&&w(c,i,Lt(a,d)),f=je(d.ref)&&N(a)?"":a,qt(d.ref)?[...d.ref.options].forEach(p=>p.selected=f.includes(p.value)):d.refs?he(d.ref)?d.refs.length>1?d.refs.forEach(p=>(!p.defaultChecked||!p.disabled)&&(p.checked=Array.isArray(f)?!!f.find(C=>C===p.value):f===p.value)):d.refs[0]&&(d.refs[0].checked=!!f):d.refs.forEach(p=>p.checked=p.value===f):We(d.ref)?d.ref.value="":(d.ref.value=f,d.ref.type||b.values.next({name:i,values:{...c}})))}(o.shouldDirty||o.shouldTouch)&&ie(i,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&De(i)},K=(i,a,o)=>{for(const h in a){const f=a[h],d=`${i}.${h}`,p=y(n,d);(m.array.has(i)||!Re(f)||p&&!p._f)&&!oe(f)?K(d,f,o):B(d,f,o)}},te=(i,a,o={})=>{const h=y(n,i),f=m.array.has(i),d=H(a);w(c,i,d),f?(b.array.next({name:i,values:{...c}}),(x.isDirty||x.dirtyFields)&&o.shouldDirty&&b.state.next({name:i,dirtyFields:Oe(l,c),isDirty:F(i,d)})):h&&!h._f&&!N(d)?K(i,d,o):B(i,d,o),nt(i,m)&&b.state.next({...s}),b.values.next({name:i,values:{...c}}),!v.mount&&r()},fe=async i=>{const a=i.target;let o=a.name,h=!0;const f=y(n,o),d=()=>a.type?Me(f._f):Vt(i),p=C=>{h=Number.isNaN(C)||C===y(c,o,C)};if(f){let C,q;const pe=d(),ne=i.type===Ve.BLUR||i.type===Ve.FOCUS_OUT,Pt=!ws(f._f)&&!t.resolver&&!y(s.errors,o)&&!f._f.deps||Ds(ne,y(s.touchedFields,o),s.isSubmitted,M,R),qe=nt(o,m,ne);w(c,o,pe),ne?(f._f.onBlur&&f._f.onBlur(i),j&&j(0)):f._f.onChange&&f._f.onChange(i);const Ee=ie(o,pe,ne,!1),Bt=!I(Ee)||qe;if(!ne&&b.values.next({name:o,type:i.type,values:{...c}}),Pt)return x.isValid&&_(),Bt&&b.state.next({name:o,...qe?{}:Ee});if(!ne&&qe&&b.state.next({...s}),$(!0),t.resolver){const{errors:tt}=await z([o]);if(p(pe),h){const It=dt(s.errors,n,o),st=dt(tt,n,It.name||o);C=st.error,o=st.name,q=I(tt)}}else C=(await ct(f,c,P,t.shouldUseNativeValidation))[o],p(pe),h&&(C?q=!1:x.isValid&&(q=await Q(n,!0)));h&&(f._f.deps&&De(f._f.deps),we(o,q,C,Ee))}},me=(i,a)=>{if(y(s.errors,a)&&i.focus)return i.focus(),1},De=async(i,a={})=>{let o,h;const f=xe(i);if($(!0),t.resolver){const d=await ee(k(i)?i:f);o=I(d),h=i?!f.some(p=>y(d,p)):o}else i?(h=(await Promise.all(f.map(async d=>{const p=y(n,d);return await Q(p&&p._f?{[d]:p}:p)}))).every(Boolean),!(!h&&!s.isValid)&&_()):h=o=await Q(n);return b.state.next({...!Y(i)||x.isValid&&o!==s.isValid?{}:{name:i},...t.resolver||!i?{isValid:o}:{},errors:s.errors,isValidating:!1}),a.shouldFocus&&!h&&ve(n,me,i?f:m.mount),h},Ke=i=>{const a={...l,...v.mount?c:{}};return k(i)?a:Y(i)?y(a,i):i.map(o=>y(a,o))},Ge=(i,a)=>({invalid:!!y((a||s).errors,i),isDirty:!!y((a||s).dirtyFields,i),isTouched:!!y((a||s).touchedFields,i),error:y((a||s).errors,i)}),Ot=i=>{i&&xe(i).forEach(a=>L(s.errors,a)),b.state.next({errors:i?s.errors:{}})},Ye=(i,a,o)=>{const h=(y(n,i,{_f:{}})._f||{}).ref;w(s.errors,i,{...a,ref:h}),b.state.next({name:i,errors:s.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Mt=(i,a)=>Z(i)?b.values.subscribe({next:o=>i(S(void 0,a),o)}):S(i,a,!0),ke=(i,a={})=>{for(const o of i?xe(i):m.mount)m.mount.delete(o),m.array.delete(o),a.keepValue||(L(n,o),L(c,o)),!a.keepError&&L(s.errors,o),!a.keepDirty&&L(s.dirtyFields,o),!a.keepTouched&&L(s.touchedFields,o),!t.shouldUnregister&&!a.keepDefaultValue&&L(l,o);b.values.next({values:{...c}}),b.state.next({...s,...a.keepDirty?{isDirty:F()}:{}}),!a.keepIsValid&&_()},Je=({disabled:i,name:a,field:o,fields:h,value:f})=>{if(G(i)){const d=i?void 0:k(f)?Me(o?o._f:y(h,a)._f):f;w(c,a,d),ie(a,d,!1,!1,!0)}},Se=(i,a={})=>{let o=y(n,i);const h=G(a.disabled);return w(n,i,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:i}},name:i,mount:!0,...a}}),m.mount.add(i),o?Je({field:o,disabled:a.disabled,name:i}):de(i,!0,a.value),{...h?{disabled:a.disabled}:{},...t.progressive?{required:!!a.required,min:ye(a.min),max:ye(a.max),minLength:ye(a.minLength),maxLength:ye(a.maxLength),pattern:ye(a.pattern)}:{},name:i,onChange:fe,onBlur:fe,ref:f=>{if(f){Se(i,a),o=y(n,i);const d=k(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,p=Rs(d),C=o._f.refs||[];if(p?C.find(q=>q===d):d===o._f.ref)return;w(n,i,{_f:{...o._f,...p?{refs:[...C.filter(Le),d,...Array.isArray(y(l,i))?[{}]:[]],ref:{type:d.type,name:i}}:{ref:d}}}),de(i,!1,void 0,d)}else o=y(n,i,{}),o._f&&(o._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(jt(m.array,i)&&v.action)&&m.unMount.add(i)}}},Qe=()=>t.shouldFocusError&&ve(n,me,m.mount),Nt=i=>{G(i)&&(b.state.next({disabled:i}),ve(n,a=>{a.disabled=i},0,!1))},Xe=(i,a)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let h=H(c);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:d}=await z();s.errors=f,h=d}else await Q(n);L(s.errors,"root"),I(s.errors)?(b.state.next({errors:{}}),await i(h,o)):(a&&await a({...s.errors},o),Qe(),setTimeout(Qe)),b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(s.errors),submitCount:s.submitCount+1,errors:s.errors})},Ut=(i,a={})=>{y(n,i)&&(k(a.defaultValue)?te(i,y(l,i)):(te(i,a.defaultValue),w(l,i,a.defaultValue)),a.keepTouched||L(s.touchedFields,i),a.keepDirty||(L(s.dirtyFields,i),s.isDirty=a.defaultValue?F(i,y(l,i)):F()),a.keepError||(L(s.errors,i),x.isValid&&_()),b.state.next({...s}))},Ze=(i,a={})=>{const o=i?H(i):l,h=H(o),f=i&&!I(i)?h:l;if(a.keepDefaultValues||(l=o),!a.keepValues){if(a.keepDirtyValues||O)for(const d of m.mount)y(s.dirtyFields,d)?w(f,d,y(c,d)):te(d,y(f,d));else{if(Be&&k(i))for(const d of m.mount){const p=y(n,d);if(p&&p._f){const C=Array.isArray(p._f.refs)?p._f.refs[0]:p._f.ref;if(je(C)){const q=C.closest("form");if(q){q.reset();break}}}}n={}}c=e.shouldUnregister?a.keepDefaultValues?H(l):{}:H(f),b.array.next({values:{...f}}),b.values.next({values:{...f}})}m={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!v.mount&&r(),v.mount=!x.isValid||!!a.keepIsValid,v.watch=!!e.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?s.submitCount:0,isDirty:a.keepDirty?s.isDirty:!!(a.keepDefaultValues&&!se(i,l)),isSubmitted:a.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:a.keepDirtyValues?s.dirtyFields:a.keepDefaultValues&&i?Oe(l,i):{},touchedFields:a.keepTouched?s.touchedFields:{},errors:a.keepErrors?s.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},et=(i,a)=>Ze(Z(i)?i(c):i,a);return{control:{register:Se,unregister:ke,getFieldState:Ge,handleSubmit:Xe,setError:Ye,_executeSchema:z,_getWatch:S,_getDirty:F,_updateValid:_,_removeUnmounted:A,_updateFieldArray:J,_updateDisabledField:Je,_getFieldArray:U,_reset:Ze,_resetDefaultValues:()=>Z(t.defaultValues)&&t.defaultValues().then(i=>{et(i,t.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:i=>{s={...s,...i}},_disableForm:Nt,_subjects:b,_proxyFormState:x,get _fields(){return n},get _formValues(){return c},get _state(){return v},set _state(i){v=i},get _defaultValues(){return l},get _names(){return m},set _names(i){m=i},get _formState(){return s},set _formState(i){s=i},get _options(){return t},set _options(i){t={...t,...i}}},trigger:De,register:Se,handleSubmit:Xe,watch:Mt,setValue:te,getValues:Ke,reset:et,resetField:Ut,clearErrors:Ot,unregister:ke,setError:Ye,setFocus:(i,a={})=>{const o=y(n,i),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),a.shouldSelect&&f.select())}},getFieldState:Ge}}function Es(e={}){const r=D.useRef(),t=D.useRef(),[s,n]=D.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},disabled:!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...qs(e,()=>n(c=>({...c}))),formState:s});const l=r.current.control;return l._options=e,$e({subject:l._subjects.state,next:c=>{Rt(c,l._proxyFormState,l._updateFormState,!0)&&n({...l._formState})}}),D.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),D.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==s.isDirty&&l._subjects.state.next({isDirty:c})}},[l,s.isDirty]),D.useEffect(()=>{e.values&&!se(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values):l._resetDefaultValues()},[e.values,l]),D.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),r.current.formState=At(s,l),r.current}const Is=({cars:e})=>{const r=ft(ys),t=ht(),{pathname:s}=Gt(),n=s==="/favorites"&&(e==null?void 0:e.length)===0,l=os(e),c=gs(e,"make"),{register:v,handleSubmit:m,control:j,reset:V,formState:{errors:x}}=Es({mode:"onChange",shouldDisable:n});re.useEffect(()=>{V(r)},[r,V]);const b=R=>{t(Yt(R))},O=()=>{t(Jt()),V({brand:"",price:"",from:"",to:""})};return u.jsx("form",{onSubmit:m(b),className:`${n?"pointer-events-none":""}`,disabled:n,children:u.jsxs("div",{children:[u.jsxs("div",{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"brand",children:"Car brand"}),u.jsx(rt,{name:"brand",control:j,rules:{required:!0,message:"Brand is required"},render:({field:R})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...R,children:[u.jsx("option",{value:"",children:"Enter the text"}),c&&c.map((M,P)=>u.jsx("option",{value:M,children:M},P))]}),x.brand&&u.jsx("p",{className:`error ${n?"opacity-0":"opacity-100"}`,children:x.brand.type==="required"?"Brand is required":x.brand.message})]})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"price",children:"Price/ 1 hour"}),u.jsx("div",{children:u.jsx(rt,{name:"price",control:j,rules:{required:!0,min:{value:0,message:"Must be 0 or greater"}},render:({field:R})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...R,children:[u.jsx("option",{value:"",children:"To $"}),l&&l.map((M,P)=>u.jsx("option",{value:M,children:M},P))]}),x.price&&u.jsx("p",{className:`${n?"opacity-0":"opacity-100"}`,children:x.price.type==="required"?"Price is required":x.price.message})]})})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"minMileage",children:"Car mileage / km (from)"}),u.jsxs("div",{children:[u.jsxs("label",{className:"relative",children:[u.jsx("input",{type:"number",...v("from",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"}})}),u.jsx("span",{children:"From"})]}),u.jsxs("label",{children:[u.jsx("input",{type:"number",...v("to",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"},validate:(R,{from:M})=>parseInt(R)>parseInt(M)?!0:"To must be greater than From"})}),u.jsx("span",{children:"To"})]}),u.jsxs("p",{className:` ${n?"opacity-0":"opacity-100"}`,children:[(x==null?void 0:x.from)&&u.jsx("span",{children:x.from.message}),(x==null?void 0:x.to)&&u.jsx("span",{children:x.to.message})]})]})]})]}),u.jsxs("div",{children:[u.jsx(ue,{type:"submit",label:"Search"}),u.jsx(ue,{type:"button",onClick:O,label:"Reset"})]})]})})};export{ue as B,hs as C,Is as F,ys as a,Ps as b,fs as c,gs as d,cs as e,Us as f,Bs as s,ht as u};
